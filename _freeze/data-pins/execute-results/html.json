{
  "hash": "1d1f359ba4bedefdf342f06de899bf78",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Put data places with {pins}\"\n---\n\n\nThis page shows how to use [pins](https://pins.rstudio.com/) to store data in various platforms as needed for the [pipelines](pipelines.qmd).\n\n## Posit Connect\n\nThis section goes through how to put data on [Posit Connect](https://posit.co/products/enterprise/connect/) using [pins](https://pins.rstudio.com/).\n\n### Connecting to Posit Connect\n\nFor the smoothest experience, we recommend that you authenticate using environment variables. The two variables you will need are `CONNECT_SERVER` and `CONNECT_API_KEY`.\n\n::: {.callout-tip}\nThe function [usethis::edit_r_environ()](https://usethis.r-lib.org/reference/edit.html) can be very handy to open `.Renviron` file to specify your environment variables.\n:::\n\n`CONNECT_SERVER` is the URL of the posit connect page. So if your connect server is accessed through `https://example.com/connect/#/content/` then you can find `CONNECT_SERVER` by removing `connect/` and everything that follows it, leaving you with `https://example.com/`.\n\n`CONNECT_API_KEY` is created through your Connect server. \n1. Click on your name in the upper right upper right.\n1. Click `API keys`.\n1. Click `New API Key`.\n1. Give your API a key, click ``Create Key`.\n\nOnce you have those two, you can add them to your `.Renviron` file in the following format:\n\n```markdown\nCONNECT_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxx\nCONNECT_SERVER=https://example.com/\n```\n\nNote that you don't want to put quotes around the values.\n\n\n\n### Creating the board\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pins)\n\nboard <- board_connect()\n```\n:::\n\n\nWe load in the data we created in [data-prep](data-prep.qmd)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflights <- readr::read_csv(\"data/laxflights2022_lite.csv\")\n```\n:::\n\n\n### Pinning data set to Connect\n\nNow that we have the data set, we can send it to Posit Connect using the `board` we created, the data set and a name of our choosing.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboard |>\n  pin_write(flights, name = \"laxflights2022_lite\", type = \"rds\")\n```\n:::\n\n\n\n## Amazon S3\n\nThis section goes through how to put data on [Amazon S3](https://aws.amazon.com/s3/) using [pins](https://pins.rstudio.com/).\n\n### Connecting to Amazon S3\n\nFor the smoothest experience, we recommend that you authenticate using environment variables. The two variables you will need are `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.\n\n::: {.callout-warning}\nDepending on your S3 setup, you will need to use additional variables to connect. Please see <https://github.com/paws-r/paws/blob/main/docs/credentials.md> and this [pins issue](https://github.com/rstudio/pins-r/issues/608) for help if the following paragraphs doesn't work for you.\n:::\n\n::: {.callout-tip}\nThe function [usethis::edit_r_environ()](https://usethis.r-lib.org/reference/edit.html) can be very handy to open `.Renviron` file to specify your environment variables.\n:::\n\nYou can find both of these keys in the same location. \n\n1. Open the [AWS Console](https://console.aws.amazon.com/)\n1. Click on your username near the top right and select `Security Credentials`\n1. Click on `Users` in the sidebar\n1. Click on your username\n1. Click on the `Security Credentials` tab\n1. Click `Create Access Key`\n1. Click `Show User Security Credentials`\n\nOnce you have those two, you can add them to your `.Renviron` file in the following format:\n\n```markdown\nAWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxx\nAWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxx\n```\n\nNote that you don't want to put quotes around the values.\n\n\n\n### Creating the board\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pins)\n\nboard <- board_s3(\n  \"tidymodels-pipeline-example\",\n  region = \"us-west-1\"\n)\n```\n:::\n\n\nWe load in the data we created in [data-prep](data-prep.qmd)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflights <- readr::read_csv(\"data/laxflights2022_lite.csv\")\n```\n:::\n\n\n### Pinning data set to Amazon S3\n\nNow that we have the data set, we can send it to Amazon S3 using the `board` we created, the data set and a name of our choosing.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboard |>\n  pin_write(flights, name = \"laxflights2022_lite\", type = \"rds\")\n```\n:::\n\n\n## Azure\n\nThis section goes through how to put data on [Azure storage](https://learn.microsoft.com/en-us/azure/storage/) using [pins](https://pins.rstudio.com/).\n\n### Connecting to Azure\n\nFor the smoothest experience, we recommend that you authenticate using environment variables. The two variables you will need are `CONNECT_SERVER` and `CONNECT_API_KEY`.\n\n::: {.callout-tip}\nThe function [usethis::edit_r_environ()](https://usethis.r-lib.org/reference/edit.html) can be very handy to open `.Renviron` file to specify your environment variables.\n:::\n\n`CONNECT_SERVER` is the URL of the posit connect page. So if your connect server is accessed through `https://example.com/connect/#/content/` then you can find `CONNECT_SERVER` by removing `connect/` and everything that follows it, leaving you with `https://example.com/`.\n\n`CONNECT_API_KEY` is created through your Connect server. \n1. Click on your name in the upper right upper right.\n1. Click `API keys`.\n1. Click `New API Key`.\n1. Give your API a key, click ``Create Key`.\n\nOnce you have those two, you can add them to your `.Renviron` file in the following format:\n\n```markdown\nCONNECT_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxx\nCONNECT_SERVER=https://example.com/\n```\n\nNote that you don't want to put quotes around the values.\n\n\n\n### Creating the board\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pins)\nlibrary(AzureStor)\n\ncontainer <-\n  storage_container(\n    endpoint = Sys.getenv(\"AZURE_CONTAINER_ENDPOINT\"),\n    sas = Sys.getenv(\"AZURE_SAS_KEY\")\n  )\n\nboard <- board_azure(container)\n```\n:::\n\n\nWe load in the data we created in [data-prep](data-prep.qmd)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflights <- readr::read_csv(\"data/laxflights2022_lite.csv\")\n```\n:::\n\n\n### Pinning data set to Azure storage container\n\nNow that we have the data set, we can send it to Azure using the `board` we created, the data set and a name of our choosing.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboard |>\n  pin_write(flights, name = \"laxflights2022_lite\", type = \"rds\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}